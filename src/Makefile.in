# @configure_input@

# libsrc/ level makefile template

# Package-specific substitution variables
package = @PACKAGE_NAME@
version = @PACKAGE_VERSION@
suffix  = @SUFFIX@

# Prefix-specific substitution variables
prefix      = @prefix@

# Mixed package and prefix substitution variables
installdir  = $(prefix)/lib

# Compiler substitution variables
FC = @FC@
FCFLAGS = @FCFLAGS@ -c
INSTALL         = @INSTALL@
INSTALL_DATA    = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_SCRIPT  = @INSTALL_SCRIPT@

# The file definitions. This include must occur before targets.
include make.filelist

# The targets
all: library

library: $(OBJ_FILES)
	ar -crvs lib$(package).a $(OBJ_FILES)

clean:
	-rm -f *.o *.a

distclean: clean
	-rm Makefile

check: all
	@echo "***THIS IS WHERE THE UNIT TEST INVOCATION GOES***"

install_lib:
	$(INSTALL) -d $(installdir)
	$(INSTALL_DATA) lib$(package).a $(installdir)/lib$(package)$(suffix).a

install: install_lib

nco_install_lib:
	$(INSTALL) -d $(installdir)
	$(INSTALL_DATA) lib$(package).a $(installdir)/lib$(package)_v$(version)$(suffix).a

nco_install: nco_install_lib

uninstall:
	-rm -fr $(installdir)

Makefile: Makefile.in ../config.status
	cd .. && ./config.status libsrc/$@

../config.status: ../configure
	cd .. && ./config.status --recheck

# Specify targets that do not generate filesystem objects
.PHONY: all clean distclean check install nco_install uninstall

# File dependency and suffix rule include files
include make.dependencies
include make.rules
